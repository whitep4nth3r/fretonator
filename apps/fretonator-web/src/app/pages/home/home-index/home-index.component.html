<main class="modeSelector__container">

  <div class="modeSelector__chipsContainer">
    <h2 class="modeSelector__label">Key</h2>

    <app-chips rounded="true"
               name="key_base"
               aria-label="Base Key"
               [(ngModel)]="note"
               (ngModelChange)="resetNoteExtender()">

      <app-chip *ngFor="let thisNote of octave"
                [id]="thisNote"
                [value]="thisNote"
                selectedColor="default">{{thisNote | titlecase}}</app-chip>

    </app-chips>

    <app-chips rounded="true"
               name="key_extender"
               aria-label="Key Extender"
               [(ngModel)]="noteExtender">

      <app-chip *ngIf="!(note === 'f' || note === 'c')" id="flat"
                [value]="'_'"
                selectedColor="grey">{{note | titlecase}}â™­
      </app-chip>

      <app-chip id="natural"
                value=""
                selectedColor="grey">{{note | titlecase}}</app-chip>

      <app-chip *ngIf="!(note === 'b' || note === 'e')" id="sharp"
                [value]="'#'"
                selectedColor="grey">{{note | titlecase}}#
      </app-chip>

    </app-chips>

  </div>

  <div class="modeSelector__chipsContainer">
    <h2 class="modeSelector__label">Mode</h2>

    <app-chips name="mode"
               [(ngModel)]="mode"
               aria-label="Mode">

      <app-chip *ngFor="let thisMode of modeSelectorObjects"
                [id]="thisMode.name"
                [value]="thisMode.name"
                selectedColor="default">{{thisMode.displayName}}</app-chip>
    </app-chips>

  </div>

  <app-fretonator [scale]="note | symbolToNoteObj: noteExtender | getScaleFromModeMap: mode"
                  [fretMap]="note | symbolToNoteObj: noteExtender | generateFretMap: mode"></app-fretonator>


  <ng-container *ngIf="note | symbolToNoteObj: noteExtender | getJamTrack: mode">
    <app-video-loader [jamTrack]="note | symbolToNoteObj: noteExtender | getJamTrack: mode"></app-video-loader>
  </ng-container>

</main>
